import MdxLayout from "../../../components/mdx-layout";
import { CodeBlock } from "../../../components/code-block";
import { BEYOND_VIBE_CODING } from "../../../lib/state/blog";

export const metadata = {
  title: "Claude Code Power User Guide: Hooks, Notifications & Automation",
  date: BEYOND_VIBE_CODING.date,
  description:
    "Practical tips and tricks for Claude Code power users. Learn how to use hooks for desktop notifications, auto-formatting, security scanning, and automated documentation updates.",
  keywords:
    "Claude Code, hooks, developer productivity, osascript, notifications, automation, AI development, workflow optimization, CLAUDE.MD, GitHub Actions",
  category: "AI Development",
  readTime: "6 min read",
  author: "Johannes MÃ¤ndle",
};

# {metadata.title}

Working with Claude Code becomes exponentially more powerful when you leverage **hooks**â€”automated commands that run at specific points in your workflow. This guide covers the essential hooks and automation strategies I use daily to stay productive and get notified when tasks complete.

## What Are Claude Code Hooks?

Hooks are shell commands that execute automatically during Claude Code's lifecycle. Think of them as event listeners for your AI coding workflowâ€”you define what happens when files are edited, tasks complete, or specific tools are used.

They're configured in `.claude/settings.json` and give you complete control over your development workflow.

### The 3 Essential Hook Events

For most developers, these three hooks cover 90% of productivity needs:

1. **PostEdit** - Runs after Claude edits any file (perfect for auto-formatting)
2. **Stop** - Runs when a complete task finishes (ideal for notifications and final checks)
3. **PostWrite** - Runs after Claude creates new files (great for security scanning)

## Essential Hooks Every Developer Should Use

### 1. Desktop Notifications (macOS)

Never miss when a task completes. This hook uses `osascript` to show a native macOS notification with sound:

<CodeBlock language="json" code={`{
  "hooks": {
    "Stop": {
      "command": "osascript -e 'display notification \\"Claude Code task completed\\" with title \\"AI Development\\" sound name \\"Glass\\"'",
      "description": "Notify when task completes"
    }
  }
}`}/>

> **What is osascript?**
> `osascript` is macOS's built-in command-line tool for running AppleScript. It lets you control macOS apps, show notifications, display dialogs, and automate system tasksâ€”all from the terminal. No installation needed!
> **Windows/Linux alternatives:** `notify-send` (Linux), `msg` or PowerShell's `New-BurntToastNotification` (Windows)

**Why this is game-changing:** Start a complex refactoring, switch to another task, and get notified when Claude finishes. Perfect for long-running operations.

### 2. Auto-Format on Every Edit

Ensure consistent code style across your entire project:

<CodeBlock language="json" code={`{
  "hooks": {
    "PostEdit": {
      "command": "prettier --write {{file_path}} && eslint --fix {{file_path}}",
      "description": "Auto-format and lint"
    }
  }
}`}/>

**Result:** Every edit is automatically formatted and linted. Zero configuration drift, zero manual cleanup.

### 3. Security Scanning on New Files

Prevent secrets and vulnerabilities from being committed:

<CodeBlock language="json" code={`{
  "hooks": {
    "PostWrite": {
      "command": "git secrets --scan {{file_path}} || echo 'Warning: Potential secret detected!'",
      "description": "Scan for leaked secrets"
    }
  }
}`}/>

**Result:** Catch API keys, tokens, and credentials before they reach your repository.



## Advanced Automation: Keep Your CLAUDE.MD Up to Date

The `CLAUDE.MD` file is your project's instruction manual for AI assistants. Keeping it current is crucial but easy to forget. Here are two approaches to automate it:

### Approach 1: Hook-Based CLAUDE.MD Updater

This hook reminds you to update `CLAUDE.MD` after task completion:

<CodeBlock language="json" code={`{
  "hooks": {
    "Stop": {
      "command": "echo '\\nðŸ“ Reminder: Update CLAUDE.MD if project structure changed\\nRun: claude update-docs' && git diff --stat HEAD~5 | grep -E 'src/|components/|lib/' && echo '\\nâš ï¸  Core files changed - CLAUDE.MD update recommended!'",
      "description": "Check if CLAUDE.MD needs updating"
    }
  }
}`}/>

**How it works:** After each task, it checks recent changes to core directories and reminds you if documentation should be updated.

**Pro tip:** Create a custom alias to make updates easy:
<CodeBlock language="bash" code={`alias update-docs="claude 'Analyze recent changes and update CLAUDE.MD with new architecture details'"`}/>

### Approach 2: Scheduled GitHub Action

For teams or active projects, automate CLAUDE.MD updates weekly with GitHub Actions:

<CodeBlock language="yaml" code={`name: Update CLAUDE.MD
on:
  schedule:
    - cron: '0 9 * * 1'  # Every Monday at 9 AM
  workflow_dispatch:  # Allow manual triggers

jobs:
  update-docs:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Full history for analysis

      - name: Analyze changes and update CLAUDE.MD
        run: |
          # Get changes from last week
          git log --since="7 days ago" --name-status --pretty=format:"" | \
          grep -E "^[AM].*\\.(ts|tsx|js|jsx)$" > recent_changes.txt

          # Count significant changes
          CHANGE_COUNT=$(wc -l < recent_changes.txt)

          if [ $CHANGE_COUNT -gt 10 ]; then
            echo "ðŸ“Š $CHANGE_COUNT files changed this week"
            echo "Consider updating CLAUDE.MD to reflect:"
            cat recent_changes.txt
            # Optionally: Create an issue or PR
          fi

      - name: Create update reminder issue
        if: env.CHANGE_COUNT > 10
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: 'ðŸ“ CLAUDE.MD Update Recommended',
              body: 'Significant changes detected this week. Review and update project documentation.'
            });
`}/>

**What this does:** Every Monday, it analyzes the past week's changes and creates a GitHub issue if significant updates were made, ensuring your documentation never falls out of date.

## Quick Tips for Hook Power Users

### Combining Multiple Hooks
You can define multiple hooks for the same event by chaining commands with `&&`:

<CodeBlock language="bash" code={`"command": "prettier --write {{file_path}} && eslint --fix {{file_path}} && git add {{file_path}}"`}/>

### Debugging Hook Failures
If a hook isn't working:
1. Check `.claude/settings.json` syntax (valid JSON required)
2. Test the command manually in your terminal
3. Use `echo` statements to verify variables: `echo "File: {{file_path}}"`
4. Check Claude Code's outputâ€”hook errors are displayed inline

### Platform-Specific Hooks
Use conditional commands for cross-platform compatibility:

<CodeBlock language="json" code={`{
  "hooks": {
    "Stop": {
      "command": "if [[ $OSTYPE == 'darwin'* ]]; then osascript -e 'display notification \\"Done\\"'; else notify-send 'Done'; fi",
      "description": "Cross-platform notifications"
    }
  }
}`}/>

### Hook Variables You Can Use
- `{{file_path}}` - Full path to the file being processed
- `{{tool_name}}` - Name of the tool being used (Write, Edit, Read, etc.)
- `{{project_root}}` - Root directory of your project

---

## Resources & Next Steps

**Official Documentation:**
- [Claude Code Hooks Guide](https://docs.claude.com/en/docs/claude-code/hooks-guide) - Complete hook reference
- [Claude Code Settings](https://docs.claude.com/en/docs/claude-code/settings) - Configuration options
- [Claude Code on the Web](https://www.anthropic.com/news/claude-code-on-the-web) - Product announcement

**Tools & Scripts:**
- [git-secrets](https://github.com/awslabs/git-secrets) - Prevent committing secrets
- [osascript Examples](https://ss64.com/osx/osascript.html) - macOS automation reference
- [GitHub Actions Syntax](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions) - Workflow automation

**Pro Tip:** Start with one hook (I recommend the notification hook), use it for a week, then add more. Hooks work best when they become invisible parts of your workflow.

export default function Page({ children }) {
  return (
    <MdxLayout metadata={metadata} slug={BEYOND_VIBE_CODING.slug}>
      {children}
    </MdxLayout>
  );
}
